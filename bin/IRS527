#!/usr/bin/env ruby
require "Irs527"
require "zip"
require "net/http"
require "sequel"
require "thor"
require "csv"

module Irs527
  class IrsCLI < Thor
    option :name
    option :ein
    desc "Hello NAME", "say hello to NAME"

    option :name
    option :ein
    desc "Finds GREP", "Returns records of GREP"
    def grep(query)
      query = Regexp.new(query)
      loc = if options[:name]
        CSV.read("records.csv").select { |row| row[1] =~ query }
      elsif options[:ein]
        CSV.read("records.csv").select { |row| row[0] =~ query }
      end
    end
  end
end

Irs527::IrsCLI.start(ARGV)



